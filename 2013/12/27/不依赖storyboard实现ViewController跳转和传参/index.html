<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="产品里原来的页面都是通过storyboard实现的，这2天开发新功能，顺便尝试了一下纯代码的实现，感觉更喜欢用代码实现的方式，本文就简单总结一下">
<meta property="og:type" content="article">
<meta property="og:title" content="不依赖storyboard实现ViewController跳转和传参">
<meta property="og:url" content="http://yoursite.com/2013/12/27/不依赖storyboard实现ViewController跳转和传参/index.html">
<meta property="og:site_name" content="xqhu&#39;s blog">
<meta property="og:description" content="产品里原来的页面都是通过storyboard实现的，这2天开发新功能，顺便尝试了一下纯代码的实现，感觉更喜欢用代码实现的方式，本文就简单总结一下">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://img.blog.csdn.net/20131227155024343">
<meta property="og:updated_time" content="2018-06-17T13:23:08.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="不依赖storyboard实现ViewController跳转和传参">
<meta name="twitter:description" content="产品里原来的页面都是通过storyboard实现的，这2天开发新功能，顺便尝试了一下纯代码的实现，感觉更喜欢用代码实现的方式，本文就简单总结一下">
<meta name="twitter:image" content="http://img.blog.csdn.net/20131227155024343">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2013/12/27/不依赖storyboard实现ViewController跳转和传参/"/>





  <title>不依赖storyboard实现ViewController跳转和传参 | xqhu's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">xqhu's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2013/12/27/不依赖storyboard实现ViewController跳转和传参/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xqhu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xqhu's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">不依赖storyboard实现ViewController跳转和传参</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2013-12-27T16:03:00+09:00">
                2013-12-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>产品里原来的页面都是通过storyboard实现的，这2天开发新功能，顺便尝试了一下纯代码的实现，感觉更喜欢用代码实现的方式，本文就简单总结一下<br><a id="more"></a></p>
<p>首先还是需要创建ViewController的实例，然后进行初始化，再把UIView挂到ViewController的view属性上</p>
<p>这个过程无论是否使用storyboard都是需要的，只是storyboard会自动完成这一步。用代码来实现的话，类似于：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">YLSStepThreeViewController *doRegisterViewController = [[YLSStepThreeViewController alloc] initWithNibName:nil bundle:[NSBundle mainBundle]];    </span><br><span class="line">YLSStepThreeView *stepThreeView = [[YLSStepThreeView alloc] initWithFrame:CGRectMake(0, 0, 540, 720)];</span><br><span class="line">doRegisterViewController.view = stepThreeView;</span><br></pre></td></tr></table></figure>
<p>创建好了ViewController，接下来就可以跳转了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">doRegisterViewController.modalPresentationStyle = UIModalPresentationFormSheet;</span><br><span class="line">doRegisterViewController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;</span><br><span class="line"></span><br><span class="line">[self presentViewController:doRegisterViewController animated:YES completion:^(void)&#123;</span><br><span class="line">    NSLog(@&quot;done...&quot;);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>前面2行是设置弹出模态窗口的效果，最后一行是真正进行跳转</p>
<p>弹出页面之后，稍后关闭页面：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[self dismissViewControllerAnimated:YES completion:^(void)&#123;</span><br><span class="line">    NSLog(@&quot;done...&quot;);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>这个dismiss方法有点讲究，关键是每个ViewController的实例，都有presentingViewController和presentedViewController属性，搞清楚这2个属性很重要</p>
<p>比如ViewControllerA负责弹出了ViewControllerB，那么A的presentedViewController就指向B，而B的presentingViewController指向A：</p>
<p><img src="http://img.blog.csdn.net/20131227155024343" alt=""></p>
<p>如果B的工作完成了，想关闭B回到A，应该在A上调用dismiss方法，而不是在B上调用。关于这一点，xcode的文档里说得很清楚：</p>
<p>Dismisses the view controller that was presented by the receiver.</p>
<p>The presenting view controller is responsible for dismissing the view controller it presented. If you call this method on the presented view controller itself, it automatically forwards the message to the presenting view controller.</p>
<p>此方法将会关闭dismiss消息接收者的presentedViewController，所以在A上调用dismiss方法，则会关闭B，因为A的presentedViewController指向了B</p>
<p>文档里也补充了，如果在B上调用此方法（出于错误？），则B会自动调用A上的dismiss方法，所以最后的结果是一样的，可能这个行为也引起了一些误解</p>
<p>但是，一个很常见的场景是，A打开了B，B打开了C，那么这时候在B上调用dismiss，会发生什么行为呢？试验了一下，只会关闭C，B本身并不会被关闭。也就是说，文档里提到的dismiss消息传递行为并没有发生。我猜想，或许是如果调用dismiss的ViewController的presentedViewController属性为nil，则会向上传递；如果不为空，那么就不传递了</p>
<p>总的来说，对于一个ViewController的序列（A打开B，B打开C，C打开D），<strong><em>想要回到哪个Controller，就在哪个Controller上调用dismiss就行了</em></strong></p>
<p>最后，涉及到在ViewController里传参的问题，本来用storyboard处理页面跳转，传参的事情由prepareForSegue方法来搞定就行了，现在没用segue了，传参的方法也很多。比如用delegate模式，或者暴露出@property直接设值，都是可以的</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2013/12/24/iOS项目中引入单元测试/" rel="next" title="iOS项目中引入单元测试">
                <i class="fa fa-chevron-left"></i> iOS项目中引入单元测试
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2013/12/27/用NSTimer定时刷新按钮的文字，避免按钮闪烁的办法/" rel="prev" title="用NSTimer定时刷新按钮的文字，避免按钮闪烁的办法">
                用NSTimer定时刷新按钮的文字，避免按钮闪烁的办法 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">xqhu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">264</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">xqhu</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
